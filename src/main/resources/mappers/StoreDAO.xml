
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//En"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
    
<mapper namespace="com.dankook.hub.dao.StoreDAO">
    <select id="listStores" resultType="com.dankook.hub.vo.StoreVO">
        SELECT S.ST_KEY, S.ST_NAME, S.ST_ADDRESS, S.ATCH_FILE_ID
        FROM STORE S,
            (SELECT ST_KEY 
            FROM CATEGORY C JOIN STORE_CATEGORY SC USING(CATE_KEY) 
            WHERE C.CATE_NAME=#{cate_name}) T
        WHERE S.ST_KEY=T.ST_KEY;
    </select>
    
    <!-- 나중에 store + store_detail 테이블 합친 view로 바꾸기 -->
    <select id="selectStoreDetail" resultType="com.dankook.hub.vo.StoreDetailVO">
        SELECT *
        FROM STORE 
        WHERE ST_KEY=#{st_key};
    </select>
</mapper>
